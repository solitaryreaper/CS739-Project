@(activePaintRooms : List[String])

@main(title = "Collaborative Drawing Editor") {

	<div id="sessions" class="container">
		<form id="session_form" method="post" class="form-horizontal container" action="@routes.Sessionmanager.index()" onsubmit="return validate_form()">
			<legend>1) Howdy Painter !! Choose a screen name ..</legend>
			<input type="text" class="input-large" id="painter_name" name="painter_name" placeholder="Please enter your name ..">
			
			<legend>2) Choosen an active session ..</legend>
			<!-- List of active paint room sessions -->
		  	<input type="text" class="input-large" id="active_session_name" name="active_session_name" placeholder="Select a session name .."> 		
			<table class="table table-striped table-bordered table-condensed">
				<thead>
					<tr>
						<th>PaintRoom</th>
						<th>Action</th>
					</tr>
				</thead>
				<tbody>
	                @if(activePaintRooms == null || activePaintRooms.isEmpty()) {
	                    <tr>
	                    	<td colspan="2" class="text-error">No active paint rooms found !! </td>
	                    </tr>
	                }
	                
	                @if(activePaintRooms != null && !activePaintRooms.isEmpty()) {
	                    @for(paintRoom <- activePaintRooms) {
	                        <tr>
	                            <td>@paintRoom</td>
	                            <td><input type="checkbox" name="@paintRoom" id="@paintRoom" value="@paintRoom"></td>
	                       </tr>
	                    }
	                }				
				</tbody>
			</table>
			
			<div align="center">
				<label><h3>OR</h3></label>
			</div>
			
			<!-- Form for creating a new paintroom session -->
			<legend>2) Create a new session ..</legend>
		  	<input type="text" class="input-large" id="new_session_name" name="new_session_name" placeholder="Enter a new session name ..">
		  	<br/><br/> 

			<div align="center">
				<button id="launch_session" type="submit" class="btn btn-danger"><i class="icon-fullscreen"></i> Launch PaintRoom !! </button>  
		    </div>		  	
		
		</form>		
	</div>
	
	<script type="text/javascript">           
	$(document).ready(function() {
		// HACK : To capture the value of the session to join via a clickable button, this hidden
		// element has been created. 
		$("#active_session_name").hide();
		
		// Get the active session which user wants to join ..
	    $(".checkbox").change(function(){
	    	if(this.checked) {
		    	var cboxValue = $(this).attr("value");
		    	$('#active_session_name').val(cboxValue);	    		
	    	}
	    }); 
		
		// validates the form
		function validate_form()
		{
			alert("inside validation function ..");
			var painter_name = $("#painter_name").val();
			// Must select a painter name for the current client
			if(painter_name == "" || !painter_name) {
				alert("Please choose a valid painter screen name !!");
				return false;
			}
			
			var active_session_name = $("#active_session_name").val();
			var new_session_name = $("#new_session_name").val();
			
			// Must either create a new sessior or choose an existing session - not both !!
			if((active_session_name && new_session_name) ||
			   (!active_session_name && !new_session_name)
			  ) 
			{
				alert("Please either choose an existing session or create a new session !!");
				return false;
			}
			
			return true;
		}
	});
	</script>	
}